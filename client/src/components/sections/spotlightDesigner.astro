---
import DesignerCard from "../../components/designerCard.astro";
import Button from "../../components/button.astro";

import fetchApi from "../../lib/strapi.js";

const designers = await fetchApi({
    endpoint: "designers",
    query: {
        pagination: {
            pageSize: 50,
        },
        populate: ["image", "tags"],
    },
    wrappedByKey: "data",
});
---

<style>
    section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: max-content;
        align-items: center;
    }

    .designers__list {
        grid-column: 1 / 3;
        overflow: scroll;
        display: flex;
    }

    .designers__list::-webkit-scrollbar {
        display: none;
    }

    .btn {
        grid-column: 2;
        grid-row: 1;
        justify-self: end;
    }
</style>

<section class="container">
    <h2 class="section__title">Featured designer</h2>
    <ul class="designers__list">
        {
            designers.map((designer) => (
                <li data-objectType={designer.objectType?.slug}>
                    <DesignerCard designer={designer} />
                </li>
            ))
        }
    </ul>

    <div class="btn">
        <Button
            buttonText={"meet the designers -->"}
            ,
            btnURL={"/designer"}
            ,
            btnClass={"btn"}
        />
    </div>
</section>
